<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Fri Dec 28 19:06:15 GMT+01:00 2001 -->
<TITLE>
ActionServlet 0.85 API: Interface  CompositeTypeHandler
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/CompositeTypeHandler.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../org/webmacro/as/Destroyed.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="CompositeTypeHandler.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.webmacro.as</FONT>
<BR>
Interface  CompositeTypeHandler</H2>
<DL>
<DT><B>All Superinterfaces:</B> <DD><A HREF="../../../org/webmacro/as/TypeHandler.html">TypeHandler</A></DD>
</DL>
<HR>
<DL>
<DT>public interface <B>CompositeTypeHandler</B><DT>extends <A HREF="../../../org/webmacro/as/TypeHandler.html">TypeHandler</A></DL>

<P>
Handler performing conversion of values of <EM>several parameters</EM> from HTTP request to
 a single Java type.

 <P><B>Example</B>: composite type handler for <TT>java.util.Date</TT>
 <EM>(see examples/DateHandler)</EM><P>

 <UL>
 <LI>Parameter <TT>date</TT> will take values from three INPUT text fields named: 'day', 'month'
 and 'year'. The <EM>composite type definition</EM> in the template file (.wm) looks like this:

 <P><TT>&lt;INPUT TYPE="Hidden" NAME="<B>date</B>" VALUE="<B>day,month,year</B>"&gt;</TT><P>

 <UL>
 The <TT>VALUE</TT> describes components of composite parameter. Component parameters (separated
 by space and/or commas) will be passed in the <B>specified order</B> to the composite type handler.

 <P>Note: If you want to allow the component to have more than one value, append array brackets
 <TT>[]</TT> to the component name, for example the 'day' parameter would be: <TT>day[]</TT>.
 </UL><P>

 <LI>The template <TT>&lt;FORM&gt;</TT> will also include text fields mentioned above:

 <PRE>
 &lt;INPUT TYPE="Text" NAME="<B>day</B>"&gt;
 &lt;INPUT TYPE="Text" NAME="<B>month</B>"&gt;
 &lt;INPUT TYPE="Text" NAME="<B>year</B>"&gt;
 </PRE>

 <LI>The source code of <TT>java.util.Date</TT> type handling composite type handler
 follows:<P>

 <PRE>
 public class DateHandler <B>implements CompositeTypeHandler</B> {
     private static Calendar calendar = Calendar.getInstance();

     public Object convert(WebContext context,
                           String[] componentNames,
                           String[][] componentValues)
     throws ConversionException {
         if (componentNames.length < 3)
             throw new ConversionException("Wrong composite definition for" +
                                           " type java.util.Date");
         int components[] = new int[3];
         int i=0;

         // try to convert components to integer values
         try {
            for (; i<3; i++)
                components[i] = Integer.parseInt(componentValues[i][0]);
         } catch (NumberFormatException e) {
            throw new ConversionException("Incorrect format",
                                          componentNames[i],
                                          componentValues[i][0],
                                          e);
         }

         // use java.util.Calendar class to create java.util.Date object
         calendar.set(components[2], components[1], components[0]);
         return calendar.getTime();
     }
 }
 </PRE>

 <LI>Put a type handler definition to ActionConfig as for any
 <A HREF="../../../org/webmacro/as/TypeHandler.html"><CODE>TypeHandler</CODE></A>.
<P>
<DL>
<DT><B>See Also: </B><DD><A HREF="../../../org/webmacro/as/ConversionException.html"><CODE>ConversionException</CODE></A>, 
<A HREF="../../../org/webmacro/as/SimpleTypeHandler.html"><CODE>SimpleTypeHandler</CODE></A></DL>
<HR>

<P>
<!-- ======== INNER CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->


<!-- ======== CONSTRUCTOR SUMMARY ======== -->


<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.Object</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/as/CompositeTypeHandler.html#convert(org.webmacro.servlet.WebContext, java.lang.String[], java.lang.String[][])">convert</A></B>(org.webmacro.servlet.WebContext&nbsp;context,
        java.lang.String[]&nbsp;componentNames,
        java.lang.String[][]&nbsp;componentValues)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method called when a parameter type conversion is needed.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->


<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="convert(org.webmacro.servlet.WebContext, java.lang.String[], java.lang.String[][])"><!-- --></A><H3>
convert</H3>
<PRE>
public java.lang.Object <B>convert</B>(org.webmacro.servlet.WebContext&nbsp;context,
                                java.lang.String[]&nbsp;componentNames,
                                java.lang.String[][]&nbsp;componentValues)
                         throws <A HREF="../../../org/webmacro/as/ConversionException.html">ConversionException</A></PRE>
<DL>
<DD>Method called when a parameter type conversion is needed.<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>context</CODE> - context from <A HREF="../../../org/webmacro/as/ActionServlet.html#handle(org.webmacro.servlet.WebContext)"><CODE>handle()</CODE></A> method<DD><CODE>componentNames</CODE> - names of components<DD><CODE>componentValues</CODE> - values of components from HTTP request. First index controls
                        order of component in the composite definition, the second
                        can be used to access values of components (if there is only
                        one value for the component, only 'componentValues[i][0]'
                        exists).<DT><B>Returns:</B><DD>parameter value of the appropriate Java type<DT><B>Throws:</B><DD><CODE><A HREF="../../../org/webmacro/as/ConversionException.html">ConversionException</A></CODE> - on conversion error</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/CompositeTypeHandler.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../org/webmacro/as/Destroyed.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="CompositeTypeHandler.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>

</BODY>
</HTML>
