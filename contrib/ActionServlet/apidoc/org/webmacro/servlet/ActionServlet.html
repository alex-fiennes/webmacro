<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Wed Apr 26 14:42:43 GMT+02:00 2000 -->
<TITLE>
Action Servlet API: Class  ActionServlet
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/ActionServlet.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../org/webmacro/servlet/CGI_Impersonator.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ActionServlet.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.webmacro.servlet</FONT>
<BR>
Class  ActionServlet</H2>
<PRE>
java.lang.Object
  |
  +--javax.servlet.GenericServlet
        |
        +--javax.servlet.http.HttpServlet
              |
              +--org.webmacro.servlet.WMServlet
                    |
                    +--<B>org.webmacro.servlet.ActionServlet</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>java.io.Serializable, javax.servlet.Servlet, javax.servlet.ServletConfig</DD>
</DL>
<HR>
<DL>
<DT>public abstract class <B>ActionServlet</B><DT>extends org.webmacro.servlet.WMServlet</DL>

<P>
Highly configurable servlet that maps HTTP requests to servlet methods and provides 
 automatic conversion of HTTP parameters to values of Java types.
 
 <P>Example of a simple <TT>LoginServlet</TT> demonstrates how to make ActionServlet work.

 <OL>
 <LI><H3>Specify the 'action' in HTML or template file</H3>
 In the most simple case, ActionServlet requires only one mandatory parameter named 'action' 
 to be defined in the HTTP request. For our example, we will also have to define 
 <TT>userName</TT> and <TT>password</TT> fields in the HTML form:<P>
 
 <P><PRE>
 &lt;FORM ACTION="LoginServlet" METHOD="POST"&gt;
 User name: &lt;INPUT TYPE="Text" <B>NAME="userName"</B>&gt;
 Password:  &lt;INPUT TYPE="Password" <B>NAME="password"</B>&gt;
 &lt;INPUT TYPE="Submit" <B>NAME="action"</B> VALUE="Login"&gt;
 &lt;/FORM&gt;
 </PRE>

 Note: A similar effect can be achieved with GET method - using a link like:<BR>
 <TT>&lt;A&nbsp;HREF="LoginServlet?action=Login+userName=John+password=18x79Z"&gt;
 login John&lt;/A&gt;(password=18x79Z)</TT><P> 

 Note: The parameter names are case-and-encoding sensitive and their names must 
 correspond to appropriate action definitions in the config file.

 <P><LI><H3>Create the config file</H3>
 The config file must be named <TT>YourServletClassName.properties</TT>, i.e.
 <TT>LoginServlet.properties</TT> in our example. This file must be put somewhere 
 into your CLASSPATH.<P>
 
 The file has the Properties-style file format:<P>

 <PRE>
 # hash starts comments
 newSession.template = templateShownUponNewSession.wm

 # action definitions
 action.0 = "actionName0" methodImplementingAction0(parameters1)
 action.1 = "actionName1" methodImplementingAction1(parameters2)
   ...
 action.N = "actionNameN" methodImplementingActionN(parametersN)
 </PRE>

 <UL>
 <LI><TT>newSession.template</TT> parameter specifies the template displayed
 by the servlet upon a new HTTP session, for example when the browser loads the servlet 
 page for the first time.

 <LI>An action definition specifies the <EM>action name</EM> and the <EM>implementing 
 method</EM> which is invoked by the action. The parameters types must be either 
 primitive types or fully qualified class names (except for classes from java.lang 
 package) or arrays of them. The return type and thrown exceptions must not be specified 
 here. Do not mistake 'method definition' part in config with the real method definition 
 in Java code!
 </UL>

 <P>Continuing in our example, the <TT>LoginServer.properties</TT> file will contain these two
 lines:<P>

 <PRE>
 newSession.template = Login.wm
 action.0 = "Login" login(String userName, String password)
 </PRE>

 <LI><H3>Implement the servlet</H3>
 Simply program your servlet as a usual Java application. Just keep in mind that the 
 methods implementing actions:<P>

 <OL>
 <LI>must be declared public,
 <LI>their return type must be <TT>org.webmacro.engine.Template</TT>,
 <LI>their first parameter must be of type <TT>org.webmacro.servlet.WebContext</TT>,
 <LI>may declare only <TT>org.webmacro.servlet.ActionException</TT> and/or 
     <TT>org.webmacro.broker.ResourceUnavailableException</TT> in its throws clause,
 <LI>the parameter names defined in config must be equal to the parameter names in the 
     HTTP request (i.e. in HTML/template file) and need not to have same names as in Java 
     source code (for more info on how parameter types are converted see <A HREF="../../../org/webmacro/servlet/TypeHandler.html"><CODE>TypeHandler</CODE></A>).
 </OL><P>

 To create the servlet do following:<P>

 <OL>
 <LI>Subclass ActionServlet and define methods implementing actions,
 <LI>Put some startup code (if any) into <A HREF="../../../org/webmacro/servlet/ActionServlet.html#start()"><CODE>start()</CODE></A> method (don't forget
     to call <TT>super.start()</TT>),
 <LI>Specify what to do if conversion error occurs and when required action is not implemented
     by overriding <A HREF="../../../org/webmacro/servlet/ActionServlet.html#conversionError(org.webmacro.servlet.WebContext, java.lang.String, org.webmacro.servlet.ConversionException)"><CODE>conversionError()</CODE></A> and <A HREF="../../../org/webmacro/servlet/ActionServlet.html#unassignedAction(org.webmacro.servlet.WebContext, java.lang.String)"><CODE>unassignedAction()</CODE></A> 
     methods.
 <LI>Optionally, define methods invoked before and after each action - <A HREF="../../../org/webmacro/servlet/ActionServlet.html#beforeInvoke(org.webmacro.servlet.WebContext, java.lang.String, java.lang.Object[])"><CODE>beforeInvoke()</CODE></A> and <A HREF="../../../org/webmacro/servlet/ActionServlet.html#afterInvoke(org.webmacro.engine.Template, org.webmacro.servlet.WebContext, java.lang.String, java.lang.Object[])"><CODE>afterInvoke()</CODE></A>.
 <LI>Optionally, define <A HREF="../../../org/webmacro/servlet/ActionServlet.html#beforeConversion(org.webmacro.servlet.WebContext, java.lang.String)"><CODE>beforeConversion()</CODE></A> 
     method, which is called before any conversion handler is invoked.
 </OL>

 <P>The <TT>LoginServlet</TT> implementation from our example comes here:

 <PRE>
 <B>public class LoginServlet extends ActionServlet</B> {

     // implements 'Login' action
     <B>public Template login(WebContext context, String userName, String password) 
     throws ResourceUnavailableException</B> {
         // only John may log in...
         if ("John".equals(userName) && "18x79Z".equals(password)) 
             return getTemplate("SuccessfulLogin.wm");
         else {
             // others will get 'Bad login' message back on the login page
             context.put("badLogin", Boolean.TRUE);
             return getTemplate("Login.wm");
         }
     }

     // can't be invoked in this simple example, so...
     <B>protected Template conversionError(WebContext context, 
                                        String actionName,
                                        ConversionException e)</B> {
         return null;   // ... do nothing in this method
     }

     // just display the login page, if action is not equal to 'login'
     <B>protected Template unassignedAction(WebContext context, String actionName) 
     throws ResourceUnavailableException </B>{
         return getTemplate("Login.wm");
     }     
 }
 </PRE>

 <LI><H3>Design servlet templates</H3>
 To finish our example we need two templates:

 <UL>
 <LI><TT>Login.wm</TT>, which contains all the HTML text from above:

 <P><PRE>
 &lt;HTML&gt;
 &lt;BODY&gt;
 #if ($badLogin){
     &lt;P&gt;&lt;FONT COLOR="red"&gt;Bad user name or password. 
     Try again.&lt;/FONT&gt;&lt;P&gt;
 }
 &lt;FORM ACTION="LoginServlet" METHOD="POST"&gt;
 User name: &lt;INPUT TYPE="Text" <B>NAME="userName"</B>&gt;&lt;BR&gt;
 Password:  &lt;INPUT TYPE="Password" <B>NAME="password"</B>&gt;
 &lt;INPUT TYPE="Submit" <B>NAME="action"</B> VALUE="Login"&gt;
 &lt;/FORM&gt;
 &lt;/BODY&gt;
 &lt;/HTML&gt;
 </PRE>

 <LI><TT>SuccessfulLogin.wm</TT>, which contains:

 <P><PRE>
 &lt;HTML&gt;
 &lt;BODY&gt;
 &lt;P&gt;&lt;CENTER&gt;The user $userName has been 
 successfully logged in.&lt;/CENTER&gt;&lt;P&gt;
 &lt;/BODY&gt;
 &lt;/HTML&gt;
 </PRE>

 </UL>

 <LI><H3>Compile, setup you servlet runner, and enjoy!</H3>
 </OL>

 <H4>Notes on synchronization</H4> 
 Action methods and the following methods inherited from ActionServlet:
 <UL>
 <LI><A HREF="../../../org/webmacro/servlet/ActionServlet.html#conversionError(org.webmacro.servlet.WebContext, java.lang.String, org.webmacro.servlet.ConversionException)"><CODE>conversionError()</CODE></A>,
 <LI><A HREF="../../../org/webmacro/servlet/ActionServlet.html#beforeInvoke(org.webmacro.servlet.WebContext, java.lang.String, java.lang.Object[])"><CODE>beforeInvoke()</CODE></A>,
 <LI><A HREF="../../../org/webmacro/servlet/ActionServlet.html#afterInvoke(org.webmacro.engine.Template, org.webmacro.servlet.WebContext, java.lang.String, java.lang.Object[])"><CODE>afterInvoke()</CODE></A>,
 <LI><A HREF="../../../org/webmacro/servlet/ActionServlet.html#beforeConversion(org.webmacro.servlet.WebContext, java.lang.String)"><CODE>beforeConversion()</CODE></A>
 </UL>
 are not synchronized by default. This means that two or more of these methods can be 
 called at a time. All the synchronization needed it is left up to the developer.
 </UL>
<P>
<DL>
<DT><B>See Also: </B><DD><CODE>javax.servlet.http.HttpSession</CODE>, 
<CODE>org.webmacro.engine.Template</CODE>, 
<CODE>org.webmacro.servlet.WebContext</CODE>, 
<A HREF="../../../org/webmacro/servlet/TypeHandler.html"><CODE>TypeHandler</CODE></A>, <A HREF="../../../serialized-form.html#org.webmacro.servlet.ActionServlet">Serialized Form</A></DL>
<HR>

<P>
<!-- ======== INNER CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/ActionServlet.html#actionDataReaperTimeout">actionDataReaperTimeout</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sleeping period of lastActionData reaper in miliseconds (default: 1 minute)</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/ActionServlet.html#ActionServlet()">ActionServlet</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;org.webmacro.engine.Template</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/ActionServlet.html#afterInvoke(org.webmacro.engine.Template, org.webmacro.servlet.WebContext, java.lang.String, java.lang.Object[])">afterInvoke</A></B>(org.webmacro.engine.Template&nbsp;template,
            org.webmacro.servlet.WebContext&nbsp;context,
            java.lang.String&nbsp;actionName,
            java.lang.Object[]&nbsp;convertedParams)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method called right after each action method invocation. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/ActionServlet.html#beforeConversion(org.webmacro.servlet.WebContext, java.lang.String)">beforeConversion</A></B>(org.webmacro.servlet.WebContext&nbsp;context,
                 java.lang.String&nbsp;actionName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method called before any parameter type handler is invoked. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;org.webmacro.engine.Template</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/ActionServlet.html#beforeInvoke(org.webmacro.servlet.WebContext, java.lang.String, java.lang.Object[])">beforeInvoke</A></B>(WebContext&nbsp;context,
             java.lang.String&nbsp;actionName,
             java.lang.Object[]&nbsp;convertedParams)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method called right before each action method. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;org.webmacro.engine.Template</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/ActionServlet.html#conversionError(org.webmacro.servlet.WebContext, java.lang.String, org.webmacro.servlet.ConversionException)">conversionError</A></B>(org.webmacro.servlet.WebContext&nbsp;context,
                java.lang.String&nbsp;actionName,
                <A HREF="../../../org/webmacro/servlet/ConversionException.html">ConversionException</A>&nbsp;e)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method called on parameter conversion error.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/ActionServlet.html#getActionName(int)">getActionName</A></B>(int&nbsp;index)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the name of action as defined in configuration file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.Enumeration</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/ActionServlet.html#getActionNames()">getActionNames</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns all action names from configuration file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.webmacro.engine.Template</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/ActionServlet.html#handle(org.webmacro.servlet.WebContext)">handle()</A></B>(WebContext&nbsp;context)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Handles HTTP request. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;org.webmacro.engine.Template</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/ActionServlet.html#newSession(org.webmacro.servlet.WebContext)">newSession</A></B>(org.webmacro.servlet.WebContext&nbsp;context)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method called upon a new session. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/ActionServlet.html#start()">start</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initialization of ActionServletu. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;org.webmacro.engine.Template</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/ActionServlet.html#unassignedAction(org.webmacro.servlet.WebContext, java.lang.String)">unassignedAction</A></B>(org.webmacro.servlet.WebContext&nbsp;context,
                 java.lang.String&nbsp;actionName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method called if 'action' parameter is defined but not assigned to any method.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.webmacro.servlet.WMServlet"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class org.webmacro.servlet.WMServlet</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>destroy, doGet, doPost, error, execute, getBroker, getConfig, getHandler, getTemplate, init, init, stop</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_javax.servlet.http.HttpServlet"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class javax.servlet.http.HttpServlet</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>doDelete, doOptions, doPut, doTrace, getLastModified, service, service</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_javax.servlet.GenericServlet"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class javax.servlet.GenericServlet</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>getInitParameter, getInitParameterNames, getServletConfig, getServletContext, getServletInfo, log</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="actionDataReaperTimeout"><!-- --></A><H3>
actionDataReaperTimeout</H3>
<PRE>
protected int <B>actionDataReaperTimeout</B></PRE>
<DL>
<DD>Sleeping period of lastActionData reaper in miliseconds (default: 1 minute)</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="ActionServlet()"><!-- --></A><H3>
ActionServlet</H3>
<PRE>
public <B>ActionServlet</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="afterInvoke(org.webmacro.engine.Template, org.webmacro.servlet.WebContext, java.lang.String, java.lang.Object[])"><!-- --></A><H3>
afterInvoke</H3>
<PRE>
protected org.webmacro.engine.Template <B>afterInvoke</B>(org.webmacro.engine.Template&nbsp;template,
                                                   org.webmacro.servlet.WebContext&nbsp;context,
                                                   java.lang.String&nbsp;actionName,
                                                   java.lang.Object[]&nbsp;convertedParams)
                                            throws org.webmacro.broker.ResourceUnavailableException,
                                                   <A HREF="../../../org/webmacro/servlet/ActionException.html">ActionException</A></PRE>
<DL>
<DD>Method called right after each action method invocation. If not overriden - does 
 nothing and returns the passed 'template'.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>context</CODE> - context from <A HREF="../../../org/webmacro/servlet/ActionServlet.html#handle(org.webmacro.servlet.WebContext)"><CODE>handle()</CODE></A> method<DD><CODE>template</CODE> - template returned be action method<DD><CODE>actionName</CODE> - invoked action name<DD><CODE>convertedParams</CODE> - converted parameters, which have been passed to the
                        action method. <B>Note:</B> 'convertedParams[0]' is context 
                        from <A HREF="../../../org/webmacro/servlet/ActionServlet.html#handle(org.webmacro.servlet.WebContext)"><CODE>handle()</CODE></A> (is of type <CODE>org.webmacro.servlet.WebContext</CODE></A>).<DT><B>Returns:</B><DD>template to be displayed</DL>
</DD>
</DL>
<HR>

<A NAME="beforeConversion(org.webmacro.servlet.WebContext, java.lang.String)"><!-- --></A><H3>
beforeConversion</H3>
<PRE>
protected void <B>beforeConversion</B>(org.webmacro.servlet.WebContext&nbsp;context,
                                java.lang.String&nbsp;actionName)</PRE>
<DL>
<DD>Method called before any parameter type handler is invoked. If not overriden -
 does nothing.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>context</CODE> - context from <A HREF="../../../org/webmacro/servlet/ActionServlet.html#handle(org.webmacro.servlet.WebContext)"><CODE>handle()</CODE></A> method<DD><CODE>actionName</CODE> - action to be invoked</DL>
</DD>
</DL>
<HR>

<A NAME="beforeInvoke(org.webmacro.servlet.WebContext, java.lang.String, java.lang.Object[])"><!-- --></A><H3>
beforeInvoke</H3>
<PRE>
protected org.webmacro.engine.Template <B>beforeInvoke</B>(org.webmacro.servlet.WebContext&nbsp;context,
                                                    java.lang.String&nbsp;actionName,
                                                    java.lang.Object[]&nbsp;convertedParams)
                                             throws org.webmacro.broker.ResourceUnavailableException,
                                                    <A HREF="../../../org/webmacro/servlet/ActionException.html">ActionException</A></PRE>
<DL>
<DD>Method called right before each action method. If not overriden - does nothing and 
 returns null.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>context</CODE> - context from <A HREF="../../../org/webmacro/servlet/ActionServlet.html#handle(org.webmacro.servlet.WebContext)"><CODE>handle()</CODE></A> method<DD><CODE>actionName</CODE> - action to be invoked<DD><CODE>convertedParams</CODE> - converted parameters, which will be passed to the
                        action method. <B>Note:</B> 'convertedParams[0]' is context 
                        from <A HREF="../../../org/webmacro/servlet/ActionServlet.html#handle(org.webmacro.servlet.WebContext)"><CODE>handle()</CODE></A> (is of type <CODE>org.webmacro.servlet.WebContext</CODE></A>).<DT><B>Returns:</B><DD>template to be displayed (only if not null, the action 'actionName' will 
         be invoked)</DL>
</DD>
</DL>
<HR>

<A NAME="conversionError(org.webmacro.servlet.WebContext, java.lang.String, org.webmacro.servlet.ConversionException)"><!-- --></A><H3>
conversionError</H3>
<PRE>
protected abstract org.webmacro.engine.Template <B>conversionError</B>(org.webmacro.servlet.WebContext&nbsp;context,
                                                                java.lang.String&nbsp;actionName,
                                                                <A HREF="../../../org/webmacro/servlet/ConversionException.html">ConversionException</A>&nbsp;e)
                                                         throws org.webmacro.broker.ResourceUnavailableException,
                                                                <A HREF="../../../org/webmacro/servlet/ActionException.html">ActionException</A></PRE>
<DL>
<DD>Method called on parameter conversion error.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>context</CODE> - context from <A HREF="../../../org/webmacro/servlet/ActionServlet.html#handle(org.webmacro.servlet.WebContext)"><CODE>handle()</CODE></A> method<DD><CODE>actionName</CODE> - action which cannot be called due to the error<DD><CODE>e</CODE> - exception which caused the error<DT><B>Returns:</B><DD>template to be displayed</DL>
</DD>
</DL>
<HR>

<A NAME="getActionName(int)"><!-- --></A><H3>
getActionName</H3>
<PRE>
protected final java.lang.String <B>getActionName</B>(int&nbsp;index)</PRE>
<DL>
<DD>Returns the name of action as defined in configuration file.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>index</CODE> - index of action (starts by 0)<DT><B>Returns:</B><DD>null action of this index does not exist or initialization did not
         finished successfully</DL>
</DD>
</DL>
<HR>

<A NAME="getActionNames()"><!-- --></A><H3>
getActionNames</H3>
<PRE>
protected final java.util.Enumeration <B>getActionNames</B>()</PRE>
<DL>
<DD>Returns all action names from configuration file.</DL>
<HR>

<A NAME="handle(org.webmacro.servlet.WebContext)"><!-- --></A><H3>
handle</H3>
<PRE>
public final org.webmacro.engine.Template <B>handle</B>(org.webmacro.servlet.WebContext&nbsp;context)
                                          throws <A HREF="../../../org/webmacro/servlet/HandlerException.html">HandlerException</A></PRE>
<DL>
<DD>Handles HTTP request. This method controls invocation of methods according
 to the configuration file using these rules:<P>

 <OL>
 <LI>If the value of 'action' parameter is not defined in the HTTP request of a new 
 session, template of key 'newSession.template' from configuration file is returned.

 <LI>If the value of 'action' parameter is not defined in the HTTP request of a valid
 session, last action is reinvoked - using same parameter values (this happens when
 browser reloads the same page).

 <LI> If the value of 'action' parameter is defined, the assigned action method is 
 called. If a conversion error occurs (before the action method is called), <A HREF="../../../org/webmacro/servlet/ActionServlet.html#conversionError(org.webmacro.servlet.WebContext, java.lang.String, org.webmacro.servlet.ConversionException)"><CODE>conversionError()</CODE></A> method.

 <LI> If the value of 'action' parameter is not assigned to any action method,
 <A HREF="../../../org/webmacro/servlet/ActionServlet.html#unassignedAction(org.webmacro.servlet.WebContext, java.lang.String)"><CODE>unassignedAction()</CODE></A> is called.
 </OL><DD><DL>
<DT><B>Overrides:</B><DD><CODE>handle</CODE> in class <CODE>org.webmacro.servlet.WMServlet</CODE></DL>
</DD>
<DD><DL>
<DT><B>Returns:</B><DD>template to be displayed<DT><B>Throws:</B><DD><CODE><A HREF="../../../org/webmacro/servlet/ActionException.html">ActionException</A></CODE> - on error of action method<DD><CODE><A HREF="../../../org/webmacro/servlet/HandlerException.html">HandlerException</A></CODE> - on other error<DT><B>See Also: </B><DD><A HREF="../../../org/webmacro/servlet/TypeHandler.html"><CODE>TypeHandler</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="newSession(org.webmacro.servlet.WebContext)"><!-- --></A><H3>
newSession</H3>
<PRE>
protected org.webmacro.engine.Template <B>newSession</B>(org.webmacro.servlet.WebContext&nbsp;context)</PRE>
<DL>
<DD>Method called upon a new session. Returns 'newSessionTemplate' if not overrriden.</DL>
<HR>

<A NAME="start()"><!-- --></A><H3>
start</H3>
<PRE>
public void <B>start</B>()</PRE>
<DL>
<DD>Initialization of ActionServletu. Must be called as <TT>super.start()</TT>
 if overriden.<DD><DL>
<DT><B>Overrides:</B><DD><CODE>start()</CODE> in class <CODE>org.webmacro.servlet.WMServlet</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="unassignedAction(org.webmacro.servlet.WebContext, java.lang.String)"><!-- --></A><H3>
unassignedAction</H3>
<PRE>
protected abstract org.webmacro.engine.Template <B>unassignedAction</B>(org.webmacro.servlet.WebContext&nbsp;context,
                                                                 java.lang.String&nbsp;actionName)
                                                          throws org.webmacro.broker.ResourceUnavailableException,
                                                                 <A HREF="../../../org/webmacro/servlet/ActionException.html">ActionException</A></PRE>
<DL>
<DD>Method called if 'action' parameter is defined but not assigned to any method.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>context</CODE> - context from <A HREF="../../../org/webmacro/servlet/ActionServlet.html#handle(org.webmacro.servlet.WebContext)"><CODE>handle()</CODE></A> method<DD><CODE>actionName</CODE> - unassigned action name<DT><B>Returns:</B><DD>template to be displayed<DT><B>Throws:</B><DD><CODE><A HREF="../../../org/webmacro/servlet/ActionException.html">ActionException</A></CODE> - on error of action method<DD><CODE>org.webmacro.broker.ResourceUnavailableException</CODE> - on error of action method</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/ActionServlet.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../org/webmacro/servlet/CGI_Impersonator.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ActionServlet.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>

</BODY>
</HTML>
