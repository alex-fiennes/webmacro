<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Mon Mar 13 09:19:32 GMT+01:00 2000 -->
<TITLE>
Action Servlet API: Interface  CompositeTypeHandler
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/CompositeTypeHandler.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/webmacro/servlet/ActionServlet.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/webmacro/servlet/ConversionException.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="CompositeTypeHandler.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.webmacro.servlet</FONT>
<BR>
Interface  CompositeTypeHandler</H2>
<DL>
<DT><B>All Superinterfaces:</B> <DD><A HREF="../../../org/webmacro/servlet/TypeHandler.html">TypeHandler</A></DD>
</DL>
<HR>
<DL>
<DT>public interface <B>CompositeTypeHandler</B><DT>extends <A HREF="../../../org/webmacro/servlet/TypeHandler.html">TypeHandler</A></DL>

<P>
Handler performing conversion of values of <EM>several parameters</EM> from HTTP request to 
 a single Java type.
 
 <P>The following example explains how can a composite type handler create <TT>java.util.Date</TT>
 object from HTTP parameters:<P>
 
 <P><OL>
 <LI>The type <TT>Date</TT> takes values from three HTML form text fields named: 'day', 
 'month' and 'year'. The composite handler should take their values and create an object 
 of class <TT>java.util.Date</TT>.

 <LI>Supposing that the method implementing 'Set date' action has only one parameter of 
 type <TT>java.util.Date</TT>, the configuration file of such action servlet will contain 
 action definition like:<P>

 <PRE>
 action.0 = "Set date" setDate(java.util.Date)
 </PRE>

 <LI>Put the composite type definition to the template or HTML file using the INPUT tag:<P>

 <PRE>
 &lt;INPUT TYPE="HIDDEN" <B>NAME="Date" VALUE="day,month,year"</B>&gt;
 </PRE>
 
 <UL><P>

 <LI>The string <TT>VALUE</TT> describes components of composite parameter. Component 
 parameters (separated by space and/or commas) will be passed in the <B>specified order</B> 
 to the composite type handler. 

 <LI>If you want to allow the component to have more than one value, append array brackets 
  <TT>[]</TT> to the component name, for example the 'day' parameter would be: <TT>day[]</TT>.
 </UL><P>

 Note: Because of security reasons, no Java types are used in the composite definition in 
       the HTML.

 <P><LI>The source code of <TT>java.util.Date</TT> type handling composite type handler 
 follows:<P>

 <PRE>
 public class DateHandler implements CompositeTypeHandler {
     public Object convert(WebContext context, 
                           String[] componentNames,
                           String[][] componentValues) 
     throws ConversionException {
         if (parameterValues.length < 3) 
             throw new ConversionException("Wrong composite definition for" +
                                           " type java.util.Date");
         int components[] = new int[3];
         int i=0;
          
         // try to convert components to integer values
         try {
            for (; i<3; i++)
                components[i] = Integer.parseInt(parameterValues[i][0]),
         } catch (NumberFormatException e) {
            throw new ConversionException("Incorrect format", 
                                            componentNames[i], 
                                            componentValues[i],
                                            e);
         }

         // use java.util.Calendar class to create java.util.Date object
         Calendar calendar = Calendar.getInstance();
         calendar.set(year, month, day);
         return calendar.getTime();
     }
 }
 </PRE>

 <LI>Put a type handler definition to <TT>&lt;servlet&gt;_handlers.properties</TT> 
     (as described in the <A HREF="../../../org/webmacro/servlet/TypeHandler.html"><CODE>TypeHandler</CODE></A> documentation.
<P>
<DL>
<DT><B>See Also: </B><DD><A HREF="../../../org/webmacro/servlet/ConversionException.html"><CODE>ConversionException</CODE></A>, 
<A HREF="../../../org/webmacro/servlet/SimpleTypeHandler.html"><CODE>SimpleTypeHandler</CODE></A></DL>
<HR>

<P>
<!-- ======== INNER CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->


<!-- ======== CONSTRUCTOR SUMMARY ======== -->


<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.Object</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/webmacro/servlet/CompositeTypeHandler.html#convert(org.webmacro.servlet.WebContext, java.lang.String[], java.lang.String[][])">convert</A></B>(org.webmacro.servlet.WebContext&nbsp;context,
        java.lang.String[]&nbsp;componentNames,
        java.lang.String[][]&nbsp;componentValues)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method called when a parameter type conversion is needed.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->


<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="convert(org.webmacro.servlet.WebContext, java.lang.String[], java.lang.String[][])"><!-- --></A><H3>
convert</H3>
<PRE>
public java.lang.Object <B>convert</B>(org.webmacro.servlet.WebContext&nbsp;context,
                                java.lang.String[]&nbsp;componentNames,
                                java.lang.String[][]&nbsp;componentValues)
                         throws <A HREF="../../../org/webmacro/servlet/ConversionException.html">ConversionException</A></PRE>
<DL>
<DD>Method called when a parameter type conversion is needed.<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>context</CODE> - context from <A HREF="../../../org/webmacro/servlet/ActionServlet.html#handle(org.webmacro.servlet.WebContext)"><CODE>handle()</CODE></A> method<DD><CODE>componentNames</CODE> - names of components<DD><CODE>componentValues</CODE> - values of components from HTTP request. First index controls
                        order of component in the composite definition, the second
                        can be used to access values of components (if there is only
                        one value for the component, only 'componentValues[i][0]'
                        exists).<DT><B>Returns:</B><DD>parameter value of the appropriate Java type<DT><B>Throws:</B><DD><A HREF="../../../org/webmacro/servlet/ConversionException.html">ConversionException</A> - on conversion error</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/CompositeTypeHandler.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/webmacro/servlet/ActionServlet.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/webmacro/servlet/ConversionException.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="CompositeTypeHandler.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>

</BODY>
</HTML>
