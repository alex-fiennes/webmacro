<html>
<head><title>JSDK Servlets Guide</title>
<meta name="description" value="Guide to Servlet Engines">
<meta name="keywords" value="servlet engine, JSDK, Java, CLASSPATH">
</head>
<body bgcolor="white">

<h1 color="green">Servlet Guide</h1>
<blockquote>

<a href="Download.html">WebMacro</a> is a Servlet Framework--this
guide provides a brief overview of Servlet Engines and other things
you'll need to set up a Servlet environment and use it. Whether or 
not you use WebMacro, this guide should help you get started 
with servlets.
<p>
The documentation that comes with Servlet Engines is not usually 
very good, so this guide will give you an overview of the key 
things you have to get right in order to get your Servlet Engine
working, and write servlets.
<p>
<h2 color="green">Servlet Engines</h2>

In order to run Servlets you need a Servlet Engine. This is either a 
stand alone Servlet Runner, or an add on to your web server.
<p>
Each Servlet Engine has its own peculiarities and advantages. There are
good Servlet Engines available both as commercial and free products. 
<p>
Here's some of the more common Servlet Engines:

<ul>
<li><a href="http://www.javasoft.com/">SevletRunner - JavaSoft</a>
<li><a href="http://java.apache.org/">JServ - Apache</a>
<li><a href="http://www.livesoftware.com">JRUN - LiveSoftware</a>
<li><a href="http://www.sun.com">JavaWebServer - Sun</a>
<li><a href="http://www.ibm.com">Servlet Express - IBM</a>
</ul>

ServletRunner is a stand-alone Servlet Engine which implements the
JSDK environment, and not much more. You can use it as your Servlet
Engine, though it is primarily intended for testing purposes.
<p>
Which Servlet Engine you select is largely a matter of preference, 
determined by what you're most familiar with and what features are
most desirable.
<p>
<a href="Download.html">WebMacro</a> works fine with all of the 
above Servlet engines--and most likely others as well.

<h2 color="green">JSDK: Java Servlet Development Kit</h2>

You will need a Servlet Engine to get a complete implementation of the
Servlet Environment--including some core parts
of the JSDK.
<p>
Your Servlet Engine will come with an implementation of the JSDK. 
Alternately, you can download a reference implementation of the JSDK
from JavaSoft's website:
<ul>
  <li><a href="http://www.javasoft.com/products/servlet/index.html">JavaSoft Servlet Page</a>
</ul>

At this site you'll also fund some Servlet tutorials, the Servlet 
specification, links to Servlet resources, and more. 

<h2 color="green">Servlet Configuration</h2>

Configuring your Servlet Engine breaks down into three main issues:

<ul>
   <li>Installing your Servlet Engine
   <li>Getting the Servlet CLASSPATH right
   <li>Registering your Servlets
</ul>

Here we go:

<h3 color="green">Installing your Servlet Engine</h3>

You'll have to refer to the documentation that comes with your Servlet
Engine for a complete explanation. Here I'll just mention that you 
need to pay attention to the issues raised under Servlet Troubleshooting
below.

<h3 color="green">Getting the Servlet CLASSPATH right</h3>

Since Servlet CLASSPATHS are such a problem, I'll go into it in some depth.
<p>
There are several places you can set a CLASSPATH from in most Servlet Engines:
<ul>
  <li>The CLASSPATH environment (Or System classpath under NT)
      variable is used generally. If you put a Servlet in your default
      CLASSPATH your Servlet engine will not be able to reload it
      dynamically. Your Servlet will get loaded by the default ClassLoader,
      which does not do dynamic reloading.  Therefore, if you change
      your Servlet you will have to restart your Web Server in order
      to see your changes! In short, do not put your Servlets in your
      general CLASSPATH.
      <p>

  <li>Most Servlet Engines have a HOME/classes and a HOME/servlets 
      directory which they add to your CLASSPATH. DO NOT add the 
      HOME/servlets directory to your general CLASSPATH! If you do, 
      again your Web Server will have to be restarted before chagnes to 
      servlets can take effect.
      <p>

   <li>Your USER_CLASSPATH (or User's CLASSPATH) can be set from 
       within your Servlet Engine's configuration files. This sets 
       the general classpath under which your Servlet Engine runs, and
       is really the same as setting a CLASSPATH environment variable. 
       Some Servlet Engines (Java Web Server for example) will actually
       use your CLASSPATH environment variable; others (Apache-Jserv) 
       require that you set a user classpath in the Servlet Engine 
       configuration file. 
</ul>

You should refer to your Servlet Engine's documentation for a complete
explanation on how it sets and uses CLASSPATH information--but keep in
mind the issues raised above.


<h2 color="green">Servlet Programming</h2>

In order to program servlets, first you need to install the JSDK and
get the javax.servlet.* and javax.servlet.http packages into your 
CLASSPATH.
<p>
The next few steps are straightforward:
<ul>
   <li>Create a subclass of javax.servlet.http.HttpServlet
   <li>Override the doGet() and/or doPost() methods
   <li>Optionally override the init() and destroy() methods
</ul>

Your Servlet's doGet() method will be called when the Servlet Engine
receives a GET request that maps to your Servlet. Similarly, it will
call your doPost() method when a POST request arrives. 
<p>
You are passed two objects in doGet() and doPost(): 
<ul>
    <li>HttpServletRequest -- contains information about the request
    <li>HttpServletResponse -- fill this in with response data
</ul>
<p>
At this point you may want to read my article on correct Servlet design:
<a href="Servlet.html">Fundamentals of Servlet Design</a>, which 
describes the design underlying the 
<a href="Introduction.html">Webmacro Servlet Framework</a>.
<p>
You may want to have a look at WebMacro and see whether it would help 
you in what you're doing. It's a generic framework for designing 
servlets which includes an HTML template engine--saving your servlet 
from having to generate HTML directly. 
<p>
It also includes a variety of library tools designed to make many common
servlet programming tasks simpler.  
<p>
<ul>
  <li><b><a href="Download.html">Download WebMacro here</b></a>
</ul>
<p>
Best of all, it's free.


<h2 color="green">Installing your Servlet</h2>

Once you've written your servlet, place it in your HOME/Servlets 
directory. 
<p>
This is the directory in which your Servlet Engine will look to 
load servlets. Many Servlet Engines will reload your servlet each 
time its last-modified date changes--otherwise you will have to 
restart your Servlet Engine.
<p>
If your Servlet does not work, check your Servlet Engine's log file 
to find out why, and look through the information in the next 
section. 


<h2 color="green">Servlet Troubleshooting</h2>

Whenever you have a problem with Servlet configuration, getting a 
servlet to run, or working with a Servlet Engine, there are always 
two usual suspects:

<ol>
   <li>Have you got filenames wrong?
   <li>Have you got the CLASSPATH wrong?
</ol>

Filename issues are particularly tricky with servlets, since it is
not always obvious what a filename is relative to. A good rule of
thumb is to use an absolute filename whenever possible; if that is
not possible search through your Servlet Engine's documentation to
determine exactly what filenames are relative to.
<p>
A second, more subtle issue with filenames has to do with Java properties
issues. Many Servlet engines, Servlet tools, and Servlet Frameworks 
use .properties files to store configuration information. Beware that
in a Java.properties file the \ character is the escape character. This
is an issue for NT/Win95 users: You cannot write "C:\Servlets" in such
a file. Instead reverse the slash and write "C:/Servlets" (Unix style).
<p>
As for the CLASSPATH, just double and triple check that all of the 
classes your Servlet uses appear someone on the CLASSPATH. This seems 
simple, but check again--more than half the problems people report on 
the WebMacro mailing list have to do with incorrect CLASSPATH settings.
<p>
Here are some symptoms that you got the CLASSPATH wrong:
<ul>
  <li>Servlet not found
  <li>No class defined
  <li>Some .properties file cannot be found or isn't being used
  <li>NoClassDefFound or ClassNotFoundException gets thrown
  <li>Document Contains No Data -- some Servlet Engines just cancel
      the request and send nothing back to the browser, which 
      reports this. Check the error logs for other messages.
</ul>

Some of the above may be caused by other errors, but all can occur 
if your Servlet CLASSPATH is incorrect.

<h2 color="green">WebMacro Servlet Framework</h2>

Now that you know a little bit about servlets, I hope you're excited! 
Please take a look around the site and examine the WebMacro Servlet 
Framework, which was mentioned above.
<p>
I believe that the <a href="Servlet.html">design principles</a> underlying
WebMacro really are the right way to do things. Even if you don't use 
WebMacro, you probably should follow this general design.
<p>
You check WebMacro out by examining the links below, or else just 
<a href="Download.html">download WebMacro</a> and try it out!
</blockquote>

<!--TAIL-->
<hr>
<center>
<font size="+2">  
<a href="http://www.webmacro.org">webmacro.org</a> |
<A href="tutorial/index.html">Tutorial</a>  
</font> <p> 
<A href="api/index.html">api</a> |
<A href="Introduction.html">introduction</a> |
<A href="Servlet.html">servlet design</a> |
<a href="http://lists.semiotek.com/mailman/listinfo/webmacro">mailing list</a> |<A href="License.html">licensing</a> |
<A href="../RELEASE-NOTES">release notes</a> | 
<A href="../readme.html">readme</a> 
</center></P>
</body></html>
