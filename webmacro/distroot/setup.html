<html><head>
<title>WebMacro Documentation. Setup Notes</title>
</head>

<body bgcolor="white">

<center>
<b>Set Up Guidelines
<br>
Updated For Release 1.0rc1</b></center>

<p>


   <!-- -----------------------------------------------------
        This document is fairly readable as text, but looks 
        real ugly. It'll be more fun reading it in a browser.
        ----------------------------------------------------- -->

WebMacro is a free Java development package that allows you to keep
HTML and presentational issues out of your Java servlet code--while
providing web designers with a simple template language capable of
displaying any Java object.  <p>

Some basic guidelines for set-up:

<ul>
<li> webmacro.jar contains all the core classes, and needs to be in
     your classpath or your WAR distribution. 
     <p>
<li> webmacro.defaults contains all the runtime default properties. DO
     NOT MODIFY this file. Instead override this file by placing a file
     called WebMacro.properties in your classpath and making changes replacements
     here. For example, in this file, you can specify a different cache manager.
     <p>
<li> We recommend you place the root directory for your templates in your classpath.
     In this manner, the WebMacro resource provider will find them.<p>
<li> API documentation is provided with the release and is your
     principal source of coding guidelines along with the WebMacro
     wiki site.
     <p>
<li> Examples contains a few example WebMacro programs and templates 
     for you to look at to figure out how things work.
     <p>
</ul>

<p>

<a name="Install"><h3>How To Use It</h3></a>

<ul>

  <li>This applies to the HelloWorld, Standalone, and GuestBook examples.
      <p>
      These classes are servlets. Compile them and install them in 
      your servlet directory. Note that there are multiple .class
      files for GuestBook, so be sure to copy all of them.
      <p>
      Then follow the instructions below to configure your classpath.
      If the templates are in your classpath, you will not need to
      create and then specify a path to your template file.
      <p>

  <li> You need to have the a servlet runner installed and working, or an 
     equivalent servlet interface, and it has to be in your CLASSPATH.
     <p>

  <li> You need a Java 1.2 runtime environment to use
      the WebMacro.jar file distributed with this release. 
     <p>

  <li> You need to include WebMacro.jar in your classpath
     <p>

  <li> You need to include your own Java directory in your classpath, where
     you will have your WebMacro handlers and other work. To use the 
     WebMacro examples you might use $HOME/webmacro/examples--it is usually
     convenient to make this the same directory as your WebMacro.properties
     files lives in.
     <p>

</ul>

  Here is an example CLASSPATH: <pre>

CLASSPATH=$JAVA_HOME/lib/classes.zip:$HOME/webmacro/webmacro.jar:$HOME/WebMacro/examples:$JSDK_HOME

  </pre>

  You have unpacked WebMacro in your home directory in this example. 
  $JSDK_HOME contains the "javax" directory in which you have your JSDK
  base classes, and JAVA_HOME/lib/classes.zip contains the standard library.   

  <h3>Using the examples</h3>

  Follow the steps above. Then read the comments at the head of
  each examples .java file for detailed instructions.
  <p>
  Note that the examples are not pre-compiled, you must compile
  them. 
  <p>
  HelloWorld and GuestBook use the WMServlet approach, so put all their 
  .class files in your servlet directory.
  <p>
  TestWM uses the Reactor method. So register Reactor as the
  servlet with TestWM as its script name (last part of the
  URL).


<a name="Compiling"><h3>How to Compile WebMacro</h3></a>

WebMacro ships with a webmacro.jar file compiled for JDK 1.2/1.3.

To recompile WM, you will need to go to the CVS archive where you
can find the ant build script and all the supporting libraries
referenced during compilation.

<a name="Overview"><h3>Overview of the WebMacro System: </h3></a>

   WebMacro is similar in many ways to JSP/ASP and other projects in many
   ways, but differs from those according to our biases:
   <ul>

      <li> We think it is wrong to use markup for a scripting language
      <li> We think it is wrong to embed programs on a web page
      <li> We think it is wrong for web scripts to look like hard programming

      <li><b> We believe that programming and graphics design 
              are separate tasks</b>
   </ul>

   So we have designed a language very much like all the other, but which 
   fits with our biases above.  <p>

   WebMacro presents two separate interfaces:  <ol>

       <li> A template language for web page designers to use, into which
          they can substitute values from a web program 

       <li> A library and framework for web based programming, for use 
          by technical developers, which is independent of any layout 
          or other graphical concerns

   </ol>
   You might be both a graphics designer AND a programmer. Many people are. 
   However I think you will agree that these activies use different sides
   of your brain--or at least very different kinds of thinking--and it is 
   painful to try and do both at the same time.    <p>

   Alternately you might be a programmer working with a web designer: By 
   providing the web designer with a list of variables which they can 
   substitute into a page, you keep the designer at some distance from 
   your sensitive program codes. At the same time, the designer is free 
   to take those variables and lay them out any which way they please.    <p>

   This separation of program code and content is the fundamental idea 
   behind the WebMacro system.    <p>


<a name="Overview"><h3>How it works: </h3></a>

WebMacro relies heavily on introspection to glue your template to your 
back-end. On your back end you stick ordinary Java objects into your 
Context. WebMacro will then introspect these objects and make them 
available as properties in the template. 
<p>
Introspection is fairly expensive so WebMacro avoids doing this at 
execution time. The first time a class is introspected WebMacro caches 
the knowledge it gains about the class for efficient use in the future. 
Templates are also compiled into a form suitable for rapid-execution 
on first use. (Note that you have to turn on the Template caching 
in your WebMacro.properties file to see this behavior.)
<p>
The overall design of WebMacro is that the state for each request is 
contained in this Context object: you need to instantiate a new Context
for every request (you can create a prototype Context and then clone it 
for efficiency--this is automatically done for you most of the time.)
<p>
Since the state for each request is entirely contained within the Context,
templates can be shared between multiple requests. Since templates have 
no state, they don't need to be synchronized. Since Contexts are accessed
by only one thread ("thread per request") they don't need to be 
synchronized either. Thus you get very good performance out of WebMacro 
since most of the code can avoid the overhead of synchronization locks. 
<p> 
Finally, WebMacro is a framework. Most of its behavior is loaded dynamically
based on the configuration file, WebMacro.properties--the effect of this 
is that you can radically alter the behavior of WebMacro by replacing 
the classes named in WebMacro.properties with your own. There are a large
number of "plug points" in the design to allow an advanced user to 
customize WebMacro extensively. 
<p> 
For an ordinary user, though, it's good enough to rely on the default 
configuration. All you have to do is create contexts and load templates 
using the provided WebMacro interfaces. See the examples provided in 
the examples directory for more information.
<p>


</body></html>

